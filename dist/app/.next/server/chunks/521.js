"use strict";exports.id=521,exports.ids=[521],exports.modules={72590:(e,n,s)=>{s.d(n,{PresetForm:()=>P});var t=s(45512),l=s(74222),i=s(89465),a=s(31824),o=s(388),r=s(19939),c=s(15166),u=s(45841),d=s(79234),m=s(63938),p=s(27521),x=s(48376),j=s(62148),g=s(15436),f=s(44914),h=s(29405),b=s(69738),v=s(66816),S=s(15992),k=s(29571),C=s(55705),w=s(28676),y=s(99985),M=s(52312),A=s(28500),I=s(230),T=s(38872);let $={mode:"for",name:"",scenes:[{sceneName:k.eU.Moon,sceneConfig:{}}],untilMinute:"0",untilDay:"0",untilHour:"0",forTime:"0:05"};function P({preset:e=$,customSceneNames:n,action:s,submitLabel:j,title:g}){let f=(0,C.m)({initialValues:{...$,...e}});return f.watch("scenes.0.sceneName",({value:e})=>{let n="scenes.0.sceneConfig";return e===k.eU.Twinkle?f.setFieldValue(n,{color:"#ffffff",speed:50,amount:50}):e===k.eU.Ripple?f.setFieldValue(n,{color:"#ffffff",speed:5,waveHeight:6}):e===k.eU.Marquee?f.setFieldValue(n,{color:"#ffffff",speed:50,fontSize:16,text:"hello"}):e===k.eU.Emoji?f.setFieldValue(n,{emoji:"\uD83D\uDE01"}):void f.setFieldValue(n,{})}),(0,t.jsxs)("form",{onSubmit:f.onSubmit(s),"data-testid":"preset-form",children:[g&&(0,t.jsx)(l.Title,{order:2,children:g}),(0,t.jsx)(i.Box,{w:"50%",m:"auto",mb:"md",children:(0,t.jsx)(w.K,{preset:f.values})}),(0,t.jsxs)(a.Stack,{children:[(0,t.jsx)(o.TextInput,{placeholder:"",variant:"filled",style:{flex:1},label:"Name",required:!0,"data-testid":"preset-name",...f.getInputProps(k.M8.Name)},f.key(k.M8.Name)),(0,t.jsxs)(a.Stack,{gap:"2",children:[(0,t.jsx)(r.InputLabel,{children:"Scene"}),f.getValues().scenes.map((e,s)=>(0,t.jsx)(U,{form:f,index:s,customSceneNames:n},s)),(0,t.jsx)(c.Button,{variant:"light","data-testid":"new-scene-button",onClick:()=>f.insertListItem("scenes",{sceneName:k.eU.Moon,sceneConfig:{}}),children:"Add new scene"})]}),(0,t.jsx)(u.Divider,{}),(0,t.jsx)(d.SegmentedControl,{fullWidth:!0,data:[{label:"For...",value:"for"},{label:"Until...",value:"until"}],...f.getInputProps("mode")},f.key("mode")),"for"===f.values.mode&&(0,t.jsx)(m.Select,{data:[{label:"5 minutes",value:"0:05"},{label:"15 minutes",value:"0:15"},{label:"30 minutes",value:"0:30"},{label:"1 hour",value:"1:00"},{label:"1 hour 30 minutes",value:"1:30"},{label:"2 hours",value:"2:00"},{label:"Forever",value:"0:00"}],"data-testid":"for-time-select",...f.getInputProps(k.M8.ForTime)},f.key(k.M8.ForTime)),"until"===f.values.mode&&(0,t.jsxs)(p.Flex,{gap:"xs",children:[(0,t.jsx)(m.Select,{placeholder:"Hour",data:[{label:"Today",value:"0"},{label:"Tomorrow",value:"1"}],"data-testid":"until-hour-select",...f.getInputProps(k.M8.UntilDay)},f.key(k.M8.UntilDay)),(0,t.jsx)(x.Text,{children:"@"}),(0,t.jsx)(m.Select,{placeholder:"Hour",data:[{label:"5 AM",value:"5"},{label:"6 AM",value:"6"},{label:"7 AM",value:"7"},{label:"8 AM",value:"8"},{label:"9 AM",value:"9"},{label:"10 AM",value:"10"},{label:"11 AM",value:"11"},{label:"12 PM",value:"12"},{label:"1 PM",value:"13"}],"data-testid":"until-hour-select",...f.getInputProps(k.M8.UntilHour)},f.key(k.M8.UntilHour)),(0,t.jsx)(x.Text,{children:":"}),(0,t.jsx)(m.Select,{placeholder:"Minute",data:[{label:"00",value:"00"},{label:"15",value:"15"},{label:"30",value:"30"},{label:"45",value:"45"}],"data-testid":"until-minute-select",...f.getInputProps(k.M8.UntilMinute)},f.key(k.M8.UntilMinute))]}),(0,t.jsx)(u.Divider,{}),(0,t.jsx)(F,{form:f}),(0,t.jsx)(p.Flex,{mt:"xs",children:(0,t.jsx)(c.Button,{type:"submit",fullWidth:!0,children:j||"Save"})})]})]})}function U({form:e,index:n,customSceneNames:s}){let[l,i]=(0,A.useDisclosure)();return(0,t.jsxs)(j.Group,{w:"100%",mb:"xs",children:[(0,t.jsxs)(j.Group,{w:"100%",gap:"6",children:[(0,t.jsx)(m.Select,{placeholder:"Scene",variant:"filled",style:{flex:"auto"},data:[{group:"Built-in Scenes",items:[k.eU.Moon,k.eU.Countdown,k.eU.Twinkle,k.eU.Ripple,k.eU.Marquee,k.eU.Emoji]},{group:"Custom Scenes",items:s}],"data-testid":`scene-${n}-select`,required:!0,...e.getInputProps(`scenes.${n}.sceneName`)},e.key(`scenes.${n}.sceneName`)),(0,t.jsx)(g.ActionIcon,{variant:"light","data-testid":`scene-${n}-settings-button`,onClick:i.toggle,size:"lg",children:(0,t.jsx)(y.A,{size:22})}),(0,t.jsx)(g.ActionIcon,{color:"red",variant:"light",size:"lg","data-testid":`scene-${n}-delete-button`,onClick:()=>e.removeListItem("scenes",n),children:(0,t.jsx)(M.A,{size:16})})]}),l&&(0,t.jsx)(z,{form:e,index:n})]},n)}function z({form:e,index:n}){let{sceneName:s}=e.getValues().scenes[n];return"emoji"===s?(0,t.jsx)(T.A,{data:I,previewPosition:"none",navPosition:"none",maxFrequentRows:"1",onEmojiSelect:s=>{e.setFieldValue(`scenes.${n}.sceneConfig.emoji`,s.native)}}):"twinkle"===s?(0,t.jsx)(f.Card,{w:"100%",children:(0,t.jsxs)(a.Stack,{children:[(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Twinkle Speed"}),(0,t.jsx)(h.Slider,{label:null,...e.getInputProps(`scenes.${n}.sceneConfig.speed`)},e.key(`scenes.${n}.sceneConfig.speed`))]}),(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Twinkle Amount"}),(0,t.jsx)(h.Slider,{label:null,...e.getInputProps(`scenes.${n}.sceneConfig.amount`)},e.key(`scenes.${n}.sceneConfig.amount`))]}),(0,t.jsx)(b.ColorInput,{placeholder:"Select a twinkle color",...e.getInputProps(`scenes.${n}.sceneConfig.color`)},e.key(`scenes.${n}.sceneConfig.color`))]})}):"ripple"===s?(0,t.jsx)(f.Card,{w:"100%",children:(0,t.jsxs)(a.Stack,{children:[(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Speed"}),(0,t.jsx)(h.Slider,{label:null,...e.getInputProps(`scenes.${n}.sceneConfig.speed`)},e.key(`scenes.${n}.sceneConfig.speed`))]}),(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Wave height"}),(0,t.jsx)(h.Slider,{label:null,...e.getInputProps(`scenes.${n}.sceneConfig.waveHeight`)},e.key(`scenes.${n}.sceneConfig.waveHeight`))]}),(0,t.jsx)(b.ColorInput,{placeholder:"Select a twinkle color",...e.getInputProps(`scenes.${n}.sceneConfig.color`)},e.key(`scenes.${n}.sceneConfig.color`))]})}):"marquee"===s?(0,t.jsx)(f.Card,{w:"100%",children:(0,t.jsxs)(a.Stack,{children:[(0,t.jsx)(o.TextInput,{label:"Message",...e.getInputProps(`scenes.${n}.sceneConfig.text`)},e.key(`scenes.${n}.sceneConfig.text`)),(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Font size"}),(0,t.jsx)(h.Slider,{min:12,max:60,...e.getInputProps(`scenes.${n}.sceneConfig.fontSize`)},e.key(`scenes.${n}.sceneConfig.fontSize`))]}),(0,t.jsx)(v.Checkbox,{label:"Mirror horizontally",...e.getInputProps(`scenes.${n}.sceneConfig.mirrorHorizontally`)},e.key(`scenes.${n}.sceneConfig.mirrorHorizontally`)),(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Speed"}),(0,t.jsx)(h.Slider,{...e.getInputProps(`scenes.${n}.sceneConfig.speed`)},e.key(`scenes.${n}.sceneConfig.speed`))]}),(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(x.Text,{size:"sm",children:"Starting row"}),(0,t.jsx)(h.Slider,{max:32,...e.getInputProps(`scenes.${n}.sceneConfig.startingRow`)},e.key(`scenes.${n}.sceneConfig.startingRow`))]}),(0,t.jsx)(b.ColorInput,{placeholder:"Select a twinkle color",...e.getInputProps(`scenes.${n}.sceneConfig.color`)},e.key(`scenes.${n}.sceneConfig.color`))]})}):(0,t.jsx)(f.Card,{w:"100%",children:(0,t.jsx)(x.Text,{ta:"center",size:"xs",children:"No scene options available"})})}function F({form:e}){return(0,t.jsx)(S.Accordion,{defaultValue:"Apples",variant:"filled",children:(0,t.jsxs)(S.Accordion.Item,{value:"hardware",children:[(0,t.jsx)(S.Accordion.Control,{children:(0,t.jsx)(x.Text,{size:"sm",c:"dimmed",children:"Advanced Settings"})}),(0,t.jsx)(S.Accordion.Panel,{children:(0,t.jsx)(a.Stack,{children:(0,t.jsx)(m.Select,{label:"Time adjustment interval",description:"Configure a custom time adjustment interval in the UI",placeholder:"Select...",data:[{label:"1 minute",value:"1"},{label:"5 minutes",value:"5"},{label:"10 minutes",value:"10"},{label:"20 minutes",value:"20"},{label:"30 minutes",value:"30"},{label:"1 hour",value:"60"}],"data-testid":"time-adjustment-select",...e.getInputProps(k.M8.TimeAdjustmentAmount)},e.key(k.M8.TimeAdjustmentAmount))})})]},"hardware")})}},29571:(e,n,s)=>{s.d(n,{M8:()=>l,TS:()=>t,eU:()=>i});var t=function(e){return e.Name="name",e.TimeAdjustmentAmount="timeAdjustmentAmount",e.Brightness="brightness",e.PwnLsbNanoseconds="pwnLsbNanoseconds",e.GpioSlowdown="gpioSlowdown",e.PwmBits="pwmBits",e}({}),l=function(e){return e.Name="name",e.Scenes="scenes",e.Mode="mode",e.UntilDay="untilDay",e.UntilHour="untilHour",e.UntilMinute="untilMinute",e.ForTime="forTime",e.TimeAdjustmentAmount="timeAdjustmentAmount",e}({}),i=function(e){return e.Blank="blank",e.Moon="moon",e.Countdown="countdown",e.Twinkle="twinkle",e.Ripple="ripple",e.Marquee="marquee",e.Emoji="emoji",e}({})},41824:(e,n,s)=>{s.d(n,{V8:()=>o,cR:()=>r,zn:()=>c});var t=s(88977);s(98063);var l=s(29021),i=s.n(l),a=s(28081);async function o(){try{return i().readFileSync((0,a.rV)()).toString()}catch{return null}}async function r(){return i().readdirSync((0,a.gx)()).map(e=>e.split(".")[0])}async function c(){return i().readdirSync((0,a.gx)()).map(e=>{let n=e.split(".")[0],s=JSON.parse(i().readFileSync(`${(0,a.gx)()}/${n}.json`).toString());return{name:n,coordinates:s}})}(0,s(56215).D)([o,r,c]),(0,t.A)(o,"003cea0d5ad419b7db89820aea65799cf884b0983f",null),(0,t.A)(r,"007c97be3c926b2f0462d6d909c13ece0073520f76",null),(0,t.A)(c,"00778c6ed4a46b3cc6deb54d95f46a80fe20e8653b",null)}};